import{e as j,c as z,a as K,M as G,g as P,f as J,s as Y}from"./modal-window-rating-Dr4kUHLV.js";import{a as D,i as d}from"./vendor-BT7OT44q.js";function R(e){return e.sort((t,o)=>t.name.localeCompare(o.name)).map(({filter:t,name:o,imgURL:r})=>`<li class='categories-item' data-name='${o}' data-filter='${t}' tabindex="0"
             style="background-image:url('${r}');background-size:cover; background-repeat:no-repeat; background-position:center">
             <h3 class="categories-item-title">${o}</h3>
             <p class="categories-item-text">${t}</p>
          </li>`).join("")}let M=document.querySelector(".workouts-container-list");const c=document.querySelector(".m-workouts .workouts-pagination");let m={bodypart:"",muscles:"",equipment:"",keyword:""};async function l(e="",t="",o="",r="",s=1,a=10){m={bodypart:e,muscles:t,equipment:o,keyword:r};try{const i=j(e,t,o,r,s,a),v=await fetch(i);if(!v.ok)throw new Error("Failed to fetch workouts");const u=await v.json();M&&(M.innerHTML=z(u.results));const C=document.querySelector(".workouts-container"),q=document.querySelector(".workouts-container-list"),L=document.querySelector(".workouts-error");C&&(C.style.display="flex",q.style.display="flex",L.style.display="none"),u.results.length===0?(q.style.display="none",L.style.display="block",c.style.display="none"):u.results.length>0&&u.totalPages&&u.totalPages>0&&(c.style.display="flex",_(u.totalPages,s)),document.querySelectorAll(".workout-start-btn").forEach(x=>{x.addEventListener("click",async U=>{U.preventDefault();const N=x.closest(".workouts-card").dataset.id;try{const g=await fetch(`${K()}/${N}`);if(!g.ok)throw new Error("Failed to fetch exercise details");const O=await g.json();window.modalWindow||(window.modalWindow=new G),window.modalWindow.open(O)}catch(g){console.error("Error opening modal:",g)}})})}catch(i){console.error("Error loading workouts:",i)}}function _(e,t){if(!c){console.error("Pagination container not found");return}if(c.innerHTML="",c.style.display="flex",c.setAttribute("data-total",e),c.setAttribute("data-current",t-1),e>1){const o=P(e,t-1);c.appendChild(o),c.querySelectorAll(".pagination-page").forEach(r=>{r.addEventListener("click",s=>{s.preventDefault();const a=parseInt(r.getAttribute("data-index"))+1;l(m.bodypart,m.muscles,m.equipment,m.keyword,a,10)})})}}async function F(e="Muscles",t=1,o=12){o=window.innerWidth<=768?9:o;const{data:s}=await D.get(J(),{params:{filter:e,page:t,limit:o}});return s}const Q=document.querySelector(".filters-title"),V=document.querySelector(".categories-list"),A=document.querySelectorAll(".filter-button"),y=document.querySelector("#search-form"),T=document.querySelector("#search-input");A.forEach(e=>{e.addEventListener("click",async t=>{let o=t.target.getAttribute("data-filter").replace("-"," ");await $(o),A.forEach(a=>a.classList.remove("active")),t.target.classList.add("active"),S(),b(!1);const r=document.querySelector(".m-workouts");r.style.display="none";const s=document.querySelector(".m-categories");s.style.display="flex"})});y==null||y.addEventListener("submit",async e=>{e.preventDefault();const t=encodeURIComponent(T.value.trim());switch(W){case"Muscles":l("",p,"",t,1,10);break;case"Body parts":l(p,"","",t,1,10);break;case"Equipment":l("","",p,t,1,10);break}T.value=""});function b(e){y.style.display=e?"block":"none"}function X(e){const t=e.currentTarget.dataset.name;S(t),V.style.display="none",b(!0),loadExercises(t)}function S(e=!1){Q.innerHTML=e?'Exercises / <span class="selected-category">'+e+"</span>":"Exercises"}function Z(){document.querySelectorAll(".categories-item").forEach(t=>{t.addEventListener("click",X)})}document.addEventListener("DOMContentLoaded",async()=>{Z(),b(!1)});let w=document.querySelector(".categories-list");document.querySelector(".workouts-container");const n=document.querySelector(".m-categories .categories-pagination");let p="",W="Muscles";async function $(e){const t=document.querySelector(".m-categories");t&&(t.style.display="flex");try{const o=await F(e);if(console.log("Categories data:",o),n&&(n.innerHTML="",o.totalPages>1)){n.style.display="flex",n.setAttribute("data-total",o.totalPages),n.setAttribute("data-current",0);const r=P(o.totalPages,0);n.appendChild(r),n.querySelectorAll(".pagination-page").forEach(s=>{s.addEventListener("click",ee)})}w&&(w.innerHTML=R(o.results),H())}catch(o){console.error("Error loading categories:",o)}}async function ee(e){e.preventDefault();const t=Number(e.target.dataset.index),o=t+1,r=document.querySelector(".filter-button.active"),s=r?r.dataset.filter.replace("-"," "):"";try{const a=await F(s,o);w&&(w.innerHTML=R(a.results),H()),n&&(n.setAttribute("data-current",t),n.querySelectorAll(".pagination-page").forEach(i=>{i.classList.remove("selected")}),e.target.classList.add("selected"))}catch(a){console.error("Error handling pagination:",a)}}function H(){document.querySelectorAll(".categories-item").forEach(t=>{t.addEventListener("click",te)})}function te(e){e.preventDefault();const t=document.querySelector(".m-categories"),o=document.querySelector(".m-workouts");if(t&&o){t.style.display="none",o.style.display="flex";const r=e.target.closest(".categories-item");if(!r)return;b(!0);const s=encodeURIComponent(r.dataset.name);p=s,S(r.dataset.name);const a=r.dataset.filter;W=a;let i=window.innerWidth<=768?8:10;switch(a){case"Muscles":l("",s,"","",1,i);break;case"Body parts":l(s,"","","",1,i);break;case"Equipment":l("","",s,"",1,i);break}}}document.addEventListener("DOMContentLoaded",()=>{$("Muscles")});const h=document.querySelector(".subscribe-form"),E=h.elements.email;let k={email:""};const B="subscribe-form-state",oe=()=>{const e=localStorage.getItem(B);e&&(k=JSON.parse(e),E.value=k.email||"")};oe();h.addEventListener("submit",async e=>{if(e.preventDefault(),!E.validity.valid){d.error({title:"Error",message:"Please enter a valid email",position:"topRight",timeout:3e3,backgroundColor:"#EF4040",messageColor:"#fff"});return}k.email=E.value.trim();try{const t=await D.post(Y(),k);t.data.error?t.status===409?d.warning({title:"Warning",message:"This email is already subscribed.",position:"topRight",timeout:3e3,messageColor:"#fff"}):d.error({title:"Error",message:"Subscription failed. Please try again later.",position:"topRight",timeout:3e3,backgroundColor:"#EF4040",messageColor:"#fff"}):d.success({title:"",message:"Subscription successful!",position:"topRight",timeout:3e3,backgroundColor:"#64B880",messageColor:"#fff"})}catch(t){t.response&&t.response.status===409?d.warning({title:"Warning",message:"This email is already subscribed.",position:"topRight",timeout:3e3,messageColor:"#fff"}):d.error({title:"Error",message:"Subscription failed. Please try again later.",position:"topRight",timeout:3e3,backgroundColor:"#EF4040",messageColor:"#fff"})}h.reset(),localStorage.removeItem(B)});const f=document.querySelector(".router");document.querySelector("body");let I=0;window.addEventListener("scroll",()=>{const e=document.documentElement.scrollTop;document.body.hasAttribute("data-user-scrolling")&&(f.classList.add("sticky"),e>0?e>I?f.classList.add("hidden"):f.classList.remove("hidden"):f.classList.remove("sticky"),I=e)});document.addEventListener("wheel",()=>{document.body.setAttribute("data-user-scrolling","true"),setTimeout(()=>{document.body.removeAttribute("data-user-scrolling")},100)});
//# sourceMappingURL=index-CXDjQlb-.js.map
