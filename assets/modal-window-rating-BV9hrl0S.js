var G=Object.defineProperty;var K=(i,t,e)=>t in i?G(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var R=(i,t,e)=>K(i,typeof t!="symbol"?t+"":t,e);import{a as _,i as B}from"./vendor-BT7OT44q.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}})();const X="modulepreload",tt=function(i){return"/goit-team4-YourEnergy/"+i},D={},et=function(t,e,r){let o=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.allSettled(e.map(n=>{if(n=tt(n),n in D)return;D[n]=!0;const l=n.endsWith(".css"),h=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${h}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":X,l||(d.as="script"),d.crossOrigin="",d.href=n,c&&d.setAttribute("nonce",c),document.head.appendChild(d),l)return new Promise((L,k)=>{d.addEventListener("load",L),d.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${n}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return o.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return t().catch(s)})};async function rt(){const i=new Date().toISOString().split("T")[0],t=localStorage.getItem("quote"),e=localStorage.getItem("author"),r=localStorage.getItem("quoteDate");if(t&&e&&r===i){document.querySelector(".sidebar-quote").textContent=`${t}`,document.querySelector(".sidebar-quote-author").textContent=`${e}`;return}try{const{quoteURL:o}=await et(async()=>{const{quoteURL:l}=await Promise.resolve().then(()=>nt);return{quoteURL:l}},void 0),s=await fetch(o());if(!s.ok)throw new Error("Failed to fetch quote");const a=await s.json(),c=a.quote,n=a.author;document.querySelector(".sidebar-quote").textContent=`${c}`,document.querySelector(".sidebar-quote-author").textContent=`${n}`,localStorage.setItem("quote",c),localStorage.setItem("author",n),localStorage.setItem("quoteDate",i)}catch(o){console.error("Error fetching quote:",o)}}rt();const S="/goit-team4-YourEnergy/assets/icons-BTIkT1Ap.svg";function W(i){return typeof i=="string"&&i.length>0?i.charAt(0).toUpperCase()+i.slice(1):i}function F(i){const t=window.location.pathname;let e="",r="hide";return t.includes("favorites.html")&&(e="hide",r=""),i.sort((o,s)=>o.name.localeCompare(s.name)).map(({_id:o,name:s,burnedCalories:a,bodyPart:c,target:n,gifUrl:l,rating:h})=>{const L=Math.round(h).toFixed(1);return`
          <li class='workouts-card' data-name='${s}' data-id='${o}'>
            <div class="card-header">
              <div class="card-header_left-side">
                <span class="label">workout</span>
                <div class="rating-container ${e}">
                  <span class="rating">${L}</span>
                  <svg
                    class="star"
                    viewBox="0 0 16 16"
                    height="16"
                    width="16"
                    aria-hidden="true"
                  >
                    <use x="0" y="0" href="${S}#icon-Star"></use>
                  </svg>
                </div>
                <button class="trash-container ${r}">
                  <svg width="16" height="16">
                    <use href="${S}#icon-trash"></use>
                  </svg>
                </button>
               </div>
              <button type="button" class="workout-start-btn">
                Start
                  <svg
                    viewBox="0 0 16 16"
                    height="16"
                    width="16"
                    aria-hidden="true"
                  >
                    <use x="0" y="0" href="${S}#icon-arrow"></use>
                  </svg>
              </button>
            </div>
            <div class="card-content">
              <svg
                class="card-icon"
                viewBox="0 0 24 24"
                height="20"
                width="24"
                aria-hidden="true"
              >
                <use x="0" y="0" href="${S}#icon-running"></use>
              </svg>
              <h3 class="title text-overflow">${W(s)}</h3>
            </div>
            <div class="card-footer">
              <ul class="card-footer_items">
                <li class="card-footer_item">Burned calories: <span class="strong text-overflow item-one">${a}</span></li>
                <li class="card-footer_item">Body Part: <span class="strong text-overflow item-two">${c}</span></li>
                <li class="card-footer_item text-overflow">Target: <span class="strong text-overflow item-three">${n}</span></li>
              </ul>
            </div>
          </li>`}).join("")}const w=()=>"https://your-energy.b.goit.study/api",C=()=>`${w()}/exercises`,it=()=>w()+"/filters",ot=()=>w()+"/quote",j=()=>w()+"/subscription",st=(i,t,e,r,o,s)=>`${C()}?bodypart=${i}&muscles=${t}&equipment=${e}&keyword=${r}&page=${o}&limit=${s}`,at=()=>j(),z=i=>`${C()}/${i}`,J=async(i,t)=>{try{const e={rate:t.rate,email:t.email,review:t.review||""};return await _({method:"PATCH",url:`${w()}/exercises/${i}/rating`,data:e,headers:{"Content-Type":"application/json"}})}catch(e){throw console.error("Rating request error:",e),e}},nt=Object.freeze(Object.defineProperty({__proto__:null,addRatingRequest:J,baseUrl:w,exerciseInfoRequest:z,exerciseRequest:st,exerciseUrl:C,filtersUrl:it,quoteURL:ot,subscriptionRequest:at,subscriptionURL:j},Symbol.toStringTag,{value:"Module"})),P=(i,t)=>{let e=new DocumentFragment;const r=5,o=Math.floor(r/2);let s=Math.max(0,t-o),a=Math.min(i-1,s+r-1);a-s+1<r&&(s=Math.max(0,a-r+1));let c=document.createElement("li");if(c.setAttribute("data-index",0),c.innerHTML=1,c.classList.add("pagination-page"),t===0&&c.classList.add("selected"),e.appendChild(c),s>1){let n=document.createElement("li");n.innerHTML="...",n.classList.add("pagination-dots"),e.appendChild(n)}for(let n=s;n<=a;n++){if(n===0||n===i-1)continue;let l=document.createElement("li");l.setAttribute("data-index",n),l.innerHTML=n+1,l.classList.add("pagination-page"),n===t&&l.classList.add("selected"),e.appendChild(l)}if(a<i-2){let n=document.createElement("li");n.innerHTML="...",n.classList.add("pagination-dots"),e.appendChild(n)}if(i>1){let n=document.createElement("li");n.setAttribute("data-index",i-1),n.innerHTML=i,n.classList.add("pagination-page"),t===i-1&&n.classList.add("selected"),e.appendChild(n)}return e},ct=()=>{document.querySelectorAll(".pagination").forEach(t=>{if(t.hasAttribute("data-total")){t.innerHTML="";const e=parseInt(t.getAttribute("data-total")),r=parseInt(t.getAttribute("data-current"));t.appendChild(P(e,r)),t.addEventListener("click",async s=>{s.target.classList.contains("pagination-page")&&(s.preventDefault(),t.querySelectorAll(".pagination-page").forEach(c=>{c.classList.remove("selected")}),s.target.classList.add("selected"),t.setAttribute("data-current",s.target.getAttribute("data-index")))}),new MutationObserver(s=>{for(let a of s)if(a.type==="attributes"&&a.attributeName==="data-total"){const c=parseInt(t.getAttribute("data-total")),n=parseInt(t.getAttribute("data-current"));t.innerHTML="",t.appendChild(P(c,n))}}).observe(t,{attributes:!0})}})};document.addEventListener("DOMContentLoaded",ct);const lt=window.location.pathname,N=document.querySelectorAll(".menu-item"),y=document.querySelector(".favorites-page-text"),g=document.querySelector(".favorites-cards"),u=document.querySelector(".favorites-pagination");let f=[],p=[],v=0;const V="It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.";lt.includes("favorites.html")&&(N.forEach(i=>i.classList.remove("active")),N[1].classList.add("active"),x());async function x(){if(f=JSON.parse(localStorage.getItem("favorites"))||[],!f||f.length===0){y.style.display="block",y.textContent=V,g.innerHTML="",g.style.display="none",u.style.display="none";return}try{p=[];for(const a of f){const{data:c}=await _.get(z(a.id));p.push(c)}let t,e;const r=window.innerWidth;r<=768?e=8:r<=1440?e=10:e=p.length;const o=Math.ceil(p.length/e);if(u.setAttribute("data-total",o),o<=1?u.style.display="none":u.style.display="flex",r>1440)t=F(p),y.style.display="none",g.innerHTML=t,u.innerHTML="";else if(t=F(p.slice(v*e,(v+1)*e)),y.style.display="none",g.innerHTML=t,u){u.innerHTML="";const a=P(o,v);u.appendChild(a),u.querySelectorAll(".pagination-page").forEach(c=>{c.addEventListener("click",ut)})}document.querySelectorAll(".workout-start-btn").forEach(a=>{a.addEventListener("click",async c=>{c.preventDefault();const l=a.closest(".workouts-card").dataset.id;try{const h=await fetch(`${C()}/${l}`);if(!h.ok)throw new Error("Failed to fetch exercise details");const d=await h.json();window.modalWindow||(window.modalWindow=new A),window.modalWindow.open(d)}catch(h){console.error("Error opening modal:",h)}})})}catch(t){console.error(t)}document.querySelectorAll(".trash-container").forEach(t=>{t.classList.remove("hide"),t.addEventListener("click",dt)})}function dt(i){const e=i.target.closest(".workouts-card").getAttribute("data-id");if(f=f.filter(r=>r.id!==e),localStorage.setItem("favorites",JSON.stringify(f)),!f||f.length===0)y.style.display="block",y.textContent=V,g.innerHTML="",g.style.display="none",u.style.display="none";else{const r=Math.ceil(f.length/8);v>=r&&(v=r-1),x()}}function ut(i){const t=Number(i.target.dataset.index);v=t,u.setAttribute("data-current",v),u.querySelectorAll("li").forEach(n=>{n.classList.remove("selected")}),i.target.classList.add("selected");const r=window.innerWidth;let o;if(r<=768)o=8;else if(r<=1440)o=10;else return;const s=t*o,a=s+o,c=p.slice(s,a);g.innerHTML=F(c)}function ht(i){let t=JSON.parse(localStorage.getItem("favorites"))||[];t=t.filter(r=>r.id!==i),localStorage.setItem("favorites",JSON.stringify(t)),window.location.pathname.includes("favorites")&&x()}const U="M6.04894 0.927052C6.3483 0.0057416 7.6517 0.00574088 7.95106 0.927052L8.79611 3.52786C8.92999 3.93989 9.31394 4.21885 9.74717 4.21885H12.4818C13.4505 4.21885 13.8533 5.45846 13.0696 6.02786L10.8572 7.63525C10.5067 7.8899 10.3601 8.34127 10.494 8.75329L11.339 11.3541C11.6384 12.2754 10.5839 13.0415 9.80017 12.4721L7.58779 10.8647C7.2373 10.6101 6.7627 10.6101 6.41222 10.8647L4.19983 12.4721C3.41612 13.0415 2.36164 12.2754 2.66099 11.3541L3.50604 8.75329C3.63992 8.34127 3.49326 7.8899 3.14277 7.63525L0.930391 6.02787C0.146677 5.45846 0.549452 4.21885 1.51818 4.21885H4.25283C4.68606 4.21885 5.07001 3.93989 5.20389 3.52786L6.04894 0.927052Z",$=(i=0)=>{let t=Date.now()+Math.random();return`<div style="width: 18px; display: flex; justify-content: center; align-items: center">
    <svg id="starSVG" width="14" height="14" viewBox="0 0 14 14">
      <path
        d="${U}"
        fill="rgba(244, 244, 244, 0.2)"
      />
      <clipPath id="starClip${t}">
        <rect id="fillRect" x="0" y="0" width="${i}%" height="100%" />
      </clipPath>
      <path
        d="${U}"
        fill="#EEA10C"
        clip-path="url(#starClip${t})"
      />
    </svg>
  </div>`},ft=(i,t)=>{i.innerHTML="";const e=5,r=parseFloat(t)||0;for(let o=0;o<e;o++)if(o<Math.floor(r))i.innerHTML+=$(100);else if(o===Math.floor(r)){const s=r%1;i.innerHTML+=$(s*100)}else i.innerHTML+=$(0)},mt={heart:"/img/icons.svg#icon-heart",trash:"/img/icons.svg#icon-trash",close:"/img/icons.svg#icon-x_icon"};function E(i){return`${window.location.hostname==="localhost"?"":"/goit-team4-YourEnergy"}${mt[i]}`}const b=class b{constructor(){if(b.instance)return b.instance;this.backdrop=document.querySelector("[data-modal]"),this.closeBtn=document.querySelector("[data-modal-close]"),this.isOpen=!1,this.isFavorite=!1,this.ratingBackdrop=document.querySelector("[data-rating-modal]"),this.ratingCloseBtn=document.querySelector("[data-rating-close]"),this.ratingForm=document.querySelector(".rating-form"),this.bindEvents(),b.instance=this}bindEvents(){if(this.closeBtn&&this.closeBtn.addEventListener("click",()=>this.close()),this.backdrop&&this.backdrop.addEventListener("click",e=>{e.target===this.backdrop&&this.close()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.isOpen&&this.close()}),this.backdrop){const e=this.backdrop.querySelector(".modal-favorites-btn");e&&e.addEventListener("click",()=>this.toggleFavorite())}const t=this.backdrop.querySelector(".modal-rating-btn");t&&t.addEventListener("click",()=>this.openRatingModal()),this.ratingCloseBtn&&this.ratingCloseBtn.addEventListener("click",()=>this.closeRatingModal()),this.ratingBackdrop&&this.ratingBackdrop.addEventListener("click",e=>{e.target===this.ratingBackdrop&&this.closeRatingModal()}),this.ratingForm&&this.ratingForm.addEventListener("submit",e=>this.handleRatingSubmit(e))}async open(t){this.isOpen=!0,this.currentExerciseId=t._id,this.backdrop&&this.backdrop.classList.remove("is-hidden"),document.body.style.overflow="hidden",await this.updateContent(t);const e=JSON.parse(localStorage.getItem("favorites"))||[];this.isFavorite=e.some(a=>a.id===this.currentExerciseId);const r=this.backdrop.querySelector(".modal-favorites-btn"),o=r.querySelector(".favorites-btn-text"),s=r.querySelector("use");this.isFavorite?(o.textContent="Remove from favorites",s.setAttribute("href",E("trash")),r.classList.add("is-favorite")):(o.textContent="Add to favorites",s.setAttribute("href",E("heart")),r.classList.remove("is-favorite"))}close(){this.isOpen=!1,this.backdrop&&this.backdrop.classList.add("is-hidden"),this.ratingBackdrop&&(this.ratingBackdrop.classList.add("is-hidden"),this.ratingForm&&this.ratingForm.reset()),document.onkeydown=this.originalEscapeHandler,document.body.style.overflow=""}async updateContent(t){const{_id:e,name:r,rating:o,target:s,bodyPart:a,equipment:c,popularity:n,burnedCalories:l,description:h,gifUrl:d,time:L=3}=t,k=this.backdrop.querySelector(".modal-title");k&&(k.textContent=W(r));const I=this.backdrop.querySelector(".modal-media-container");I&&d&&(I.innerHTML=`<img src="${d}" alt="${r}" />`);const Y={Target:s,"Body Part":a,Equipment:c,Popular:n,"Burned Calories":`${l} / ${L} min`},q=this.backdrop.querySelector(".modal-parameters");q&&(q.innerHTML="",Object.entries(Y).forEach(([Z,Q])=>{const M=document.createElement("li");M.className="parameter-item",M.innerHTML=`
          <p class="modal-parameter-label">${Z}</p>
          <p class="modal-parameter-value">${this.capitalizeFirstLetter(Q)}</p>
        `,q.appendChild(M)}));const T=this.backdrop.querySelector(".modal-description");T&&(T.textContent=this.capitalizeFirstLetter(h));const H=this.backdrop.querySelector(".rating-value");H&&(H.textContent=o);const O=this.backdrop.querySelector(".rating-stars");O&&ft(O,o)}capitalizeFirstLetter(t){return typeof t=="string"&&t.length>0?t.charAt(0).toUpperCase()+t.slice(1):t}toggleFavorite(){this.isFavorite=!this.isFavorite;const t=this.backdrop.querySelector(".modal-favorites-btn"),e=t.querySelector(".favorites-btn-text"),r=t.querySelector("use");this.isFavorite?(e.textContent="Remove from favorites",r.setAttribute("href",E("trash")),t.classList.add("is-favorite"),this.saveToFavorites()):(e.textContent="Add to favorites",r.setAttribute("href",E("heart")),t.classList.remove("is-favorite"),ht(this.currentExerciseId))}saveToFavorites(){const t={id:this.currentExerciseId,name:this.backdrop.querySelector(".modal-title").textContent};let e=JSON.parse(localStorage.getItem("favorites"))||[];e.push(t),localStorage.setItem("favorites",JSON.stringify(e)),window.location.pathname.includes("favorites")&&x()}openRatingModal(){this.ratingBackdrop&&this.backdrop&&(window.modalWindowRating||(window.modalWindowRating=new ModalWindowRating),window.modalWindowRating.openRatingModal(this.currentExerciseId))}closeRatingModal(){this.ratingBackdrop&&this.backdrop&&(this.ratingBackdrop.classList.add("is-hidden"),this.backdrop.classList.remove("is-hidden"),this.ratingForm&&this.ratingForm.reset(),document.onkeydown=this.originalEscapeHandler)}async handleRatingSubmit(t){t.preventDefault();const e=this.ratingForm.querySelector("#rating-email").value.trim(),r=this.ratingForm.querySelector("#rating-comment").value.trim();!e||!r||this.closeRatingModal()}};R(b,"instance",null);let A=b;window.openMenu=function(){document.getElementById("backdrop").classList.add("is-open")};window.closeMenu=function(){document.getElementById("backdrop").classList.remove("is-open")};window.menuLayoutClickHandler=function(t){t.stopPropagation()};var m;let pt=(m=class{constructor(){if(m.instance)return m.instance;this.ratingBackdrop=document.querySelector("[data-rating-modal]"),this.ratingCloseBtn=document.querySelector("[data-rating-close]"),this.ratingForm=document.querySelector(".rating-form"),this.backdrop=document.querySelector("[data-modal]"),this.ratingCounter=document.querySelector(".rating-form-value"),this.currentExerciseId=null,this.bindEvents(),m.instance=this}bindEvents(){this.ratingCloseBtn&&this.ratingCloseBtn.addEventListener("click",()=>this.closeRatingModal()),this.ratingBackdrop&&this.ratingBackdrop.addEventListener("click",e=>{e.target===this.ratingBackdrop&&this.closeRatingModal()}),document.querySelectorAll(".rating-form-radio").forEach(e=>{e.addEventListener("mouseover",()=>{this.updateRatingDisplay(e.value)}),e.addEventListener("mouseout",()=>{const r=document.querySelector(".rating-form-radio:checked");this.updateRatingDisplay(r?r.value:"0.0")}),e.addEventListener("change",()=>{this.updateRatingDisplay(e.value)})}),this.ratingForm&&this.ratingForm.addEventListener("submit",e=>this.handleRatingSubmit(e))}updateRatingDisplay(t){this.ratingCounter&&(this.ratingCounter.textContent=parseFloat(t).toFixed(1))}openRatingModal(t){this.ratingBackdrop&&this.backdrop&&(this.currentExerciseId=t,this.backdrop.classList.add("is-hidden"),this.ratingBackdrop.classList.remove("is-hidden"),this.updateRatingDisplay("0.0"),document.querySelectorAll(".rating-form-radio").forEach(r=>r.checked=!1))}closeRatingModal(){this.ratingBackdrop&&this.backdrop&&(this.ratingBackdrop.classList.add("is-hidden"),this.backdrop.classList.remove("is-hidden"),this.ratingForm&&(this.ratingForm.reset(),this.updateRatingDisplay("0.0")))}async handleRatingSubmit(t){var a,c;if(t.preventDefault(),!this.currentExerciseId){this.showNotification("Exercise ID is missing","error");return}const e=this.ratingForm.querySelector("#rating-email").value.trim(),r=this.ratingForm.querySelector("#rating-comment").value.trim(),o=document.querySelector(".rating-form-radio:checked");if(!e||!r||!o){this.showNotification("Please fill in all fields","error");return}if(!/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(e)){this.showNotification("Please enter a valid email","error");return}try{(await J(this.currentExerciseId,{rate:parseFloat(o.value),email:e.toLowerCase(),review:r.trim()})).data&&(this.closeRatingModal(),this.showNotification("Rating added successfully","success"))}catch(n){this.showNotification(((c=(a=n.response)==null?void 0:a.data)==null?void 0:c.message)||"Failed to add rating","error")}}showNotification(t,e){const r={position:"topRight",timeout:3e3,close:!1,closeOnClick:!0};switch(e){case"success":B.success({...r,message:t,backgroundColor:"#64B880",messageColor:"#fff"});break;case"error":B.error({...r,message:t,backgroundColor:"#EF4040",messageColor:"#fff"});break;default:B.info({...r,message:t})}}},R(m,"instance",null),m);document.addEventListener("DOMContentLoaded",()=>{window.modalWindowRating=new pt});export{A as M,C as a,F as c,st as e,it as f,P as g,at as s};
//# sourceMappingURL=modal-window-rating-BV9hrl0S.js.map
