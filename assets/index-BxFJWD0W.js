const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/_task-manager-Di9FvUSR.css"])))=>i.map(i=>d[i]);
import{e as j,c as K,a as V,M as G,g as R,f as J,s as Y,_ as D}from"./modal-window-rating-rP7pFjKo.js";/* empty css               */import{a as _,i as u}from"./vendor-BT7OT44q.js";function F(e){return e.sort((t,o)=>t.name.localeCompare(o.name)).map(({filter:t,name:o,imgURL:a})=>`<li class='categories-item' data-name='${o}' data-filter='${t}' tabindex="0"
             style="background-image:url('${a}');background-size:cover; background-repeat:no-repeat; background-position:center">
             <h3 class="categories-item-title">${o}</h3>
             <p class="categories-item-text">${t}</p>
          </li>`).join("")}let x=document.querySelector(".workouts-container-list");const c=document.querySelector(".m-workouts .workouts-pagination");let g={bodypart:"",muscles:"",equipment:"",keyword:""};async function d(e="",t="",o="",a="",r=1,s=10){g={bodypart:e,muscles:t,equipment:o,keyword:a};try{const n=j(e,t,o,a,r,s);console.log(`Request URL: ${n}`);const L=await fetch(n);if(!L.ok)throw new Error("Failed to fetch workouts");const l=await L.json();console.log("Received data:",l),x&&(x.innerHTML=K(l.results));const C=document.querySelector(".workouts-container"),q=document.querySelector(".workouts-container-list"),M=document.querySelector(".workouts-error");C&&(C.style.display="flex",q.style.display="flex",M.style.display="none"),l.results.length===0?(q.style.display="none",M.style.display="block",c.style.display="none"):l.results.length>0&&l.totalPages&&l.totalPages>0&&(c.style.display="flex",Q(l.totalPages,r)),document.querySelectorAll(".workout-start-btn").forEach(T=>{T.addEventListener("click",async U=>{U.preventDefault();const z=T.closest(".workouts-card").dataset.id;try{const m=await fetch(`${V()}/${z}`);if(!m.ok)throw new Error("Failed to fetch exercise details");const N=await m.json();window.modalWindow||(window.modalWindow=new G),window.modalWindow.open(N)}catch(m){console.error("Error opening modal:",m)}})})}catch(n){console.error("Error loading workouts:",n)}}function Q(e,t){if(console.log("Setting up pagination:",{totalPages:e,currentPage:t}),!c){console.error("Pagination container not found");return}if(c.innerHTML="",c.style.display="flex",c.setAttribute("data-total",e),c.setAttribute("data-current",t-1),e>1){const o=R(e,t-1);c.appendChild(o),c.querySelectorAll(".pagination-page").forEach(a=>{a.addEventListener("click",r=>{r.preventDefault();const s=parseInt(a.getAttribute("data-index"))+1;console.log("Pagination clicked, page:",s),d(g.bodypart,g.muscles,g.equipment,g.keyword,s,10)})})}}async function B(e="Muscles",t=1,o=12){o=window.innerWidth<=768?9:o;const{data:r}=await _.get(J(),{params:{filter:e,page:t,limit:o}});return r}const X=document.querySelector(".filters-title"),Z=document.querySelector(".categories-list"),A=document.querySelectorAll(".filter-button"),y=document.querySelector("#search-form"),I=document.querySelector("#search-input");let W="Muscles";A.forEach(e=>{e.addEventListener("click",async t=>{let o=t.target.getAttribute("data-filter").replace("-"," ");W=o,await S(o),A.forEach(s=>s.classList.remove("active")),t.target.classList.add("active"),v(),h(!1);const a=document.querySelector(".m-workouts");a.style.display="none";const r=document.querySelector(".m-categories");r.style.display="flex"})});y==null||y.addEventListener("submit",async e=>{e.preventDefault();const t=encodeURIComponent(I.value.trim());switch($){case"Muscles":d("",p,"",t,1,10);break;case"Body parts":d(p,"","",t,1,10);break;case"Equipment":d("","",p,t,1,10);break}I.value=""});function h(e){y.style.display=e?"block":"none"}function ee(e){const t=e.currentTarget.dataset.name;v(t),Z.style.display="none",h(!0),oe()}function v(e=!1){X.innerHTML=e?'Exercises / <span class="selected-category">'+e+"</span>":"Exercises"}function te(){document.querySelectorAll(".categories-item").forEach(t=>{t.addEventListener("click",ee)})}document.addEventListener("DOMContentLoaded",async()=>{await S(W),te(),h(!1)});async function oe(e,t=""){}let w=document.querySelector(".categories-list");document.querySelector(".workouts-container");const i=document.querySelector(".m-categories .categories-pagination");let p="",$="Muscles";async function S(e){const t=document.querySelector(".m-categories");t&&(t.style.display="flex");try{const o=await B(e);if(console.log("Categories data:",o),i&&(i.innerHTML="",o.totalPages>1)){i.style.display="flex",i.setAttribute("data-total",o.totalPages),i.setAttribute("data-current",0);const a=R(o.totalPages,0);i.appendChild(a),i.querySelectorAll(".pagination-page").forEach(r=>{r.addEventListener("click",ae)})}w&&(w.innerHTML=F(o.results),H())}catch(o){console.error("Error loading categories:",o)}}async function ae(e){e.preventDefault();const t=Number(e.target.dataset.index),o=t+1,a=document.querySelector(".filter-button.active"),r=a?a.dataset.filter.replace("-"," "):"";try{const s=await B(r,o);w&&(w.innerHTML=F(s.results),H()),i&&(i.setAttribute("data-current",t),i.querySelectorAll(".pagination-page").forEach(n=>{n.classList.remove("selected")}),e.target.classList.add("selected"))}catch(s){console.error("Error handling pagination:",s)}}function H(){document.querySelectorAll(".categories-item").forEach(t=>{t.addEventListener("click",re)})}function re(e){e.preventDefault();const t=document.querySelector(".m-categories"),o=document.querySelector(".m-workouts");if(t&&o){t.style.display="none",o.style.display="flex";const a=e.target.closest(".categories-item");if(!a)return;h(!0);const r=encodeURIComponent(a.dataset.name);p=r,v(a.dataset.name);const s=a.dataset.filter;$=s,console.log(r);let n=window.innerWidth<=768?8:10;switch(s){case"Muscles":d("",r,"","",1,n);break;case"Body parts":d(r,"","","",1,n);break;case"Equipment":d("","",r,"",1,n);break}}}document.addEventListener("DOMContentLoaded",()=>{S("Muscles")});const E=document.querySelector(".subscribe-form"),b=E.elements.email;let k={email:""};const O="subscribe-form-state",se=()=>{const e=localStorage.getItem(O);e&&(k=JSON.parse(e),b.value=k.email||"")};se();E.addEventListener("submit",async e=>{if(e.preventDefault(),!b.validity.valid){u.error({title:"Error",message:"Please enter a valid email",position:"topRight",timeout:3e3,backgroundColor:"#EF4040",messageColor:"#fff"});return}k.email=b.value.trim();try{const t=await _.post(Y(),k);t.data.error?t.status===409?u.warning({title:"Warning",message:"This email is already subscribed.",position:"topRight",timeout:3e3,messageColor:"#fff"}):u.error({title:"Error",message:"Subscription failed. Please try again later.",position:"topRight",timeout:3e3,backgroundColor:"#EF4040",messageColor:"#fff"}):u.success({title:"",message:"Subscription successful!",position:"topRight",timeout:3e3,backgroundColor:"#64B880",messageColor:"#fff"})}catch(t){t.response&&t.response.status===409?u.warning({title:"Warning",message:"This email is already subscribed.",position:"topRight",timeout:3e3,messageColor:"#fff"}):u.error({title:"Error",message:"Subscription failed. Please try again later.",position:"topRight",timeout:3e3,backgroundColor:"#EF4040",messageColor:"#fff"})}E.reset(),localStorage.removeItem(O)});const f=document.querySelector(".router");document.querySelector("body");let P=0;window.addEventListener("scroll",()=>{const e=document.documentElement.scrollTop;document.body.hasAttribute("data-user-scrolling")&&(f.classList.add("sticky"),e>0?e>P?f.classList.add("hidden"):f.classList.remove("hidden"):f.classList.remove("sticky"),P=e)});document.addEventListener("wheel",()=>{document.body.setAttribute("data-user-scrolling","true"),setTimeout(()=>{document.body.removeAttribute("data-user-scrolling")},100)});window.location.pathname.includes("task-management")&&D(()=>Promise.resolve({}),__vite__mapDeps([0]));async function ne(){if(!window.taskManager)try{const t=(await D(()=>import("./_task-manager-M1fNHe4L.js"),[])).default;window.taskManager=new t,await new Promise(o=>setTimeout(o,200))}catch(e){return console.error("Error initializing TaskManager:",e),null}return window.taskManager}document.addEventListener("DOMContentLoaded",async()=>{try{if(window.location.pathname.includes("task-management")){await ne();const e=document.getElementById("addTaskBtn");e&&e.addEventListener("click",async t=>{t.preventDefault(),window.taskManager?window.taskManager.showModal():console.error("TaskManager not initialized")})}}catch(e){console.error("Error initializing task manager:",e)}});
//# sourceMappingURL=index-BxFJWD0W.js.map
