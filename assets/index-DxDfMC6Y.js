const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/_task-manager-Di9FvUSR.css"])))=>i.map(i=>d[i]);
import{e as z,c as j,a as J,M as K,g as D,f as V,s as G,_}from"./modal-window-rating-pJI-lBVv.js";/* empty css               */import{a as R}from"./vendor-BT7OT44q.js";function $(e){return e.sort((t,a)=>t.name.localeCompare(a.name)).map(({filter:t,name:a,imgURL:o})=>`<li class='categories-item' data-name='${a}' data-filter='${t}' tabindex="0"
             style="background-image:url('${o}');background-size:cover; background-repeat:no-repeat; background-position:center">
             <h3 class="categories-item-title">${a}</h3>
             <p class="categories-item-text">${t}</p>
          </li>`).join("")}let x=document.querySelector(".workouts-container-list");const c=document.querySelector(".m-workouts .workouts-pagination");let m={bodypart:"",muscles:"",equipment:"",keyword:""};async function d(e="",t="",a="",o="",r=1,s=10){m={bodypart:e,muscles:t,equipment:a,keyword:o};try{const n=z(e,t,a,o,r,s);console.log(`Request URL: ${n}`);const L=await fetch(n);if(!L.ok)throw new Error("Failed to fetch workouts");const l=await L.json();console.log("Received data:",l),x&&(x.innerHTML=j(l.results));const q=document.querySelector(".workouts-container"),M=document.querySelector(".workouts-container-list"),T=document.querySelector(".workouts-error");q&&(q.style.display="flex",M.style.display="flex",T.style.display="none"),l.results.length===0?(M.style.display="none",T.style.display="block",c.style.display="none"):l.results.length>0&&l.totalPages&&l.totalPages>0&&(c.style.display="flex",Y(l.totalPages,r)),document.querySelectorAll(".workout-start-btn").forEach(C=>{C.addEventListener("click",async W=>{W.preventDefault();const N=C.closest(".workouts-card").dataset.id;try{const g=await fetch(`${J()}/${N}`);if(!g.ok)throw new Error("Failed to fetch exercise details");const U=await g.json();window.modalWindow||(window.modalWindow=new K),window.modalWindow.open(U)}catch(g){console.error("Error opening modal:",g)}})})}catch(n){console.error("Error loading workouts:",n)}}function Y(e,t){if(console.log("Setting up pagination:",{totalPages:e,currentPage:t}),!c){console.error("Pagination container not found");return}if(c.innerHTML="",c.style.display="flex",c.setAttribute("data-total",e),c.setAttribute("data-current",t-1),e>1){const a=D(e,t-1);c.appendChild(a),c.querySelectorAll(".pagination-page").forEach(o=>{o.addEventListener("click",r=>{r.preventDefault();const s=parseInt(o.getAttribute("data-index"))+1;console.log("Pagination clicked, page:",s),d(m.bodypart,m.muscles,m.equipment,m.keyword,s,10)})})}}async function B(e="Muscles",t=1,a=12){a=window.innerWidth<=768?9:a;const{data:r}=await R.get(V(),{params:{filter:e,page:t,limit:a}});return r}const Q=document.querySelector(".filters-title"),X=document.querySelector(".categories-list"),A=document.querySelectorAll(".filter-button"),f=document.querySelector("#search-form"),I=document.querySelector("#search-input");let F="Muscles";A.forEach(e=>{e.addEventListener("click",async t=>{let a=t.target.getAttribute("data-filter").replace("-"," ");F=a,await E(a),A.forEach(s=>s.classList.remove("active")),t.target.classList.add("active"),b(),h(!1);const o=document.querySelector(".m-workouts");o.style.display="none";const r=document.querySelector(".m-categories");r.style.display="flex"})});f==null||f.addEventListener("submit",async e=>{e.preventDefault();const t=encodeURIComponent(I.value.trim());switch(H){case"Muscles":d("",p,"",t,1,10);break;case"Body parts":d(p,"","",t,1,10);break;case"Equipment":d("","",p,t,1,10);break}I.value=""});function h(e){f.style.display=e?"block":"none"}function Z(e){const t=e.currentTarget.dataset.name;b(t),X.style.display="none",h(!0),te()}function b(e=!1){Q.innerHTML=e?'Exercises / <span class="selected-category">'+e+"</span>":"Exercises"}function ee(){document.querySelectorAll(".categories-item").forEach(t=>{t.addEventListener("click",Z)})}document.addEventListener("DOMContentLoaded",async()=>{await E(F),ee(),h(!1)});async function te(e,t=""){}let w=document.querySelector(".categories-list");document.querySelector(".workouts-container");const i=document.querySelector(".m-categories .categories-pagination");let p="",H="Muscles";async function E(e){const t=document.querySelector(".m-categories");t&&(t.style.display="flex");try{const a=await B(e);if(console.log("Categories data:",a),i&&(i.innerHTML="",a.totalPages>1)){i.style.display="flex",i.setAttribute("data-total",a.totalPages),i.setAttribute("data-current",0);const o=D(a.totalPages,0);i.appendChild(o),i.querySelectorAll(".pagination-page").forEach(r=>{r.addEventListener("click",ae)})}w&&(w.innerHTML=$(a.results),O())}catch(a){console.error("Error loading categories:",a)}}async function ae(e){e.preventDefault();const t=Number(e.target.dataset.index),a=t+1,o=document.querySelector(".filter-button.active"),r=o?o.dataset.filter.replace("-"," "):"";try{const s=await B(r,a);w&&(w.innerHTML=$(s.results),O()),i&&(i.setAttribute("data-current",t),i.querySelectorAll(".pagination-page").forEach(n=>{n.classList.remove("selected")}),e.target.classList.add("selected"))}catch(s){console.error("Error handling pagination:",s)}}function O(){document.querySelectorAll(".categories-item").forEach(t=>{t.addEventListener("click",oe)})}function oe(e){e.preventDefault();const t=document.querySelector(".m-categories"),a=document.querySelector(".m-workouts");if(t&&a){t.style.display="none",a.style.display="flex";const o=e.target.closest(".categories-item");if(!o)return;h(!0);const r=encodeURIComponent(o.dataset.name);p=r,b(o.dataset.name);const s=o.dataset.filter;H=s,console.log(r);let n=window.innerWidth<=768?8:10;switch(s){case"Muscles":d("",r,"","",1,n);break;case"Body parts":d(r,"","","",1,n);break;case"Equipment":d("","",r,"",1,n);break}}}document.addEventListener("DOMContentLoaded",()=>{E("Muscles")});const k=document.querySelector(".subscribe-form"),v=k.elements.email;let u={email:""};const S="subscribe-form-state",re=()=>{localStorage.setItem(S,JSON.stringify(u))},se=()=>{const e=localStorage.getItem(S);e&&(u=JSON.parse(e),v.value=u.email||"")};se();k.addEventListener("input",e=>{const{name:t,value:a}=e.target;u[t]=a.trim(),re()});k.addEventListener("submit",async e=>{if(e.preventDefault(),!v.validity.valid){alert("Please enter a valid email");return}u.email=v.value.trim();try{const t=await R.post(G(),u);t.data.error?t.status===409?alert("This email is already subscribed."):alert("Subscription failed. Please try again later."):alert("Subscription successful!")}catch(t){t.response&&t.response.status===409?alert("This email is already subscribed."):alert("Subscription failed. Please try again later.")}k.reset(),localStorage.removeItem(S)});const y=document.querySelector(".router");document.querySelector("body");let P=0;window.addEventListener("scroll",()=>{const e=document.documentElement.scrollTop;document.body.hasAttribute("data-user-scrolling")&&(y.classList.add("sticky"),e>0?e>P?y.classList.add("hidden"):y.classList.remove("hidden"):y.classList.remove("sticky"),P=e)});document.addEventListener("wheel",()=>{document.body.setAttribute("data-user-scrolling","true"),setTimeout(()=>{document.body.removeAttribute("data-user-scrolling")},100)});window.location.pathname.includes("task-management")&&_(()=>Promise.resolve({}),__vite__mapDeps([0]));async function ne(){if(!window.taskManager)try{const t=(await _(()=>import("./_task-manager-M1fNHe4L.js"),[])).default;window.taskManager=new t,await new Promise(a=>setTimeout(a,200))}catch(e){return console.error("Error initializing TaskManager:",e),null}return window.taskManager}document.addEventListener("DOMContentLoaded",async()=>{try{if(window.location.pathname.includes("task-management")){await ne();const e=document.getElementById("addTaskBtn");e&&e.addEventListener("click",async t=>{t.preventDefault(),window.taskManager?window.taskManager.showModal():console.error("TaskManager not initialized")})}}catch(e){console.error("Error initializing task manager:",e)}});
//# sourceMappingURL=index-DxDfMC6Y.js.map
