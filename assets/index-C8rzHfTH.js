import{e as z,c as K,a as G,M as J,g as D,f as Y,s as _}from"./modal-window-rating-BV9hrl0S.js";import{a as F,i as d}from"./vendor-BT7OT44q.js";function R(e){return e.sort((t,o)=>t.name.localeCompare(o.name)).map(({filter:t,name:o,imgURL:r})=>`<li class='categories-item' data-name='${o}' data-filter='${t}' tabindex="0"
             style="background-image:url('${r}');background-size:cover; background-repeat:no-repeat; background-position:center">
             <h3 class="categories-item-title">${o}</h3>
             <p class="categories-item-text">${t}</p>
          </li>`).join("")}let A=document.querySelector(".workouts-container-list");const c=document.querySelector(".m-workouts .workouts-pagination");let m={bodypart:"",muscles:"",equipment:"",keyword:""};async function l(e="",t="",o="",r="",s=1,a=10){m={bodypart:e,muscles:t,equipment:o,keyword:r};try{const i=z(e,t,o,r,s,a),C=await fetch(i);if(!C.ok)throw new Error("Failed to fetch workouts");const u=await C.json();A&&(A.innerHTML=K(u.results));const q=document.querySelector(".workouts-container"),L=document.querySelector(".workouts-container-list"),x=document.querySelector(".workouts-error");q&&(q.style.display="flex",L.style.display="flex",x.style.display="none"),u.results.length===0?(L.style.display="none",x.style.display="block",c.style.display="none"):u.results.length>0&&u.totalPages&&u.totalPages>0&&(c.style.display="flex",Q(u.totalPages,s)),document.querySelectorAll(".workout-start-btn").forEach(M=>{M.addEventListener("click",async U=>{U.preventDefault();const O=M.closest(".workouts-card").dataset.id;try{const g=await fetch(`${G()}/${O}`);if(!g.ok)throw new Error("Failed to fetch exercise details");const j=await g.json();window.modalWindow||(window.modalWindow=new J),window.modalWindow.open(j)}catch(g){console.error("Error opening modal:",g)}})})}catch(i){console.error("Error loading workouts:",i)}}function Q(e,t){if(!c){console.error("Pagination container not found");return}if(c.innerHTML="",c.style.display="flex",c.setAttribute("data-total",e),c.setAttribute("data-current",t-1),e>1){const o=D(e,t-1);c.appendChild(o),c.querySelectorAll(".pagination-page").forEach(r=>{r.addEventListener("click",s=>{s.preventDefault();const a=parseInt(r.getAttribute("data-index"))+1;l(m.bodypart,m.muscles,m.equipment,m.keyword,a,10)})})}}async function W(e="Muscles",t=1,o=12){o=window.innerWidth<=768?9:o;const{data:s}=await F.get(Y(),{params:{filter:e,page:t,limit:o}});return s}const V=document.querySelector(".filters-title"),X=document.querySelector(".categories-list"),T=document.querySelectorAll(".filter-button"),y=document.querySelector("#search-form"),I=document.querySelector("#search-input");let $="Muscles";T.forEach(e=>{e.addEventListener("click",async t=>{let o=t.target.getAttribute("data-filter").replace("-"," ");$=o,await v(o),T.forEach(a=>a.classList.remove("active")),t.target.classList.add("active"),S(),b(!1);const r=document.querySelector(".m-workouts");r.style.display="none";const s=document.querySelector(".m-categories");s.style.display="flex"})});y==null||y.addEventListener("submit",async e=>{e.preventDefault();const t=encodeURIComponent(I.value.trim());switch(H){case"Muscles":l("",p,"",t,1,10);break;case"Body parts":l(p,"","",t,1,10);break;case"Equipment":l("","",p,t,1,10);break}I.value=""});function b(e){y.style.display=e?"block":"none"}function Z(e){const t=e.currentTarget.dataset.name;S(t),X.style.display="none",b(!0),te()}function S(e=!1){V.innerHTML=e?'Exercises / <span class="selected-category">'+e+"</span>":"Exercises"}function ee(){document.querySelectorAll(".categories-item").forEach(t=>{t.addEventListener("click",Z)})}document.addEventListener("DOMContentLoaded",async()=>{await v($),ee(),b(!1)});async function te(e,t=""){}let w=document.querySelector(".categories-list");document.querySelector(".workouts-container");const n=document.querySelector(".m-categories .categories-pagination");let p="",H="Muscles";async function v(e){const t=document.querySelector(".m-categories");t&&(t.style.display="flex");try{const o=await W(e);if(n&&(n.innerHTML="",o.totalPages>1)){n.style.display="flex",n.setAttribute("data-total",o.totalPages),n.setAttribute("data-current",0);const r=D(o.totalPages,0);n.appendChild(r),n.querySelectorAll(".pagination-page").forEach(s=>{s.addEventListener("click",oe)})}w&&(w.innerHTML=R(o.results),B())}catch(o){console.error("Error loading categories:",o)}}async function oe(e){e.preventDefault();const t=Number(e.target.dataset.index),o=t+1,r=document.querySelector(".filter-button.active"),s=r?r.dataset.filter.replace("-"," "):"";try{const a=await W(s,o);w&&(w.innerHTML=R(a.results),B()),n&&(n.setAttribute("data-current",t),n.querySelectorAll(".pagination-page").forEach(i=>{i.classList.remove("selected")}),e.target.classList.add("selected"))}catch(a){console.error("Error handling pagination:",a)}}function B(){document.querySelectorAll(".categories-item").forEach(t=>{t.addEventListener("click",re)})}function re(e){e.preventDefault();const t=document.querySelector(".m-categories"),o=document.querySelector(".m-workouts");if(t&&o){t.style.display="none",o.style.display="flex";const r=e.target.closest(".categories-item");if(!r)return;b(!0);const s=encodeURIComponent(r.dataset.name);p=s,S(r.dataset.name);const a=r.dataset.filter;H=a;let i=window.innerWidth<=768?8:10;switch(a){case"Muscles":l("",s,"","",1,i);break;case"Body parts":l(s,"","","",1,i);break;case"Equipment":l("","",s,"",1,i);break}}}document.addEventListener("DOMContentLoaded",()=>{v("Muscles")});const h=document.querySelector(".subscribe-form"),E=h.elements.email;let k={email:""};const N="subscribe-form-state",se=()=>{const e=localStorage.getItem(N);e&&(k=JSON.parse(e),E.value=k.email||"")};se();h.addEventListener("submit",async e=>{if(e.preventDefault(),!E.validity.valid){d.error({title:"Error",message:"Please enter a valid email",position:"topRight",timeout:3e3,backgroundColor:"#EF4040",messageColor:"#fff"});return}k.email=E.value.trim();try{const t=await F.post(_(),k);t.data.error?t.status===409?d.warning({title:"Warning",message:"This email is already subscribed.",position:"topRight",timeout:3e3,messageColor:"#fff"}):d.error({title:"Error",message:"Subscription failed. Please try again later.",position:"topRight",timeout:3e3,backgroundColor:"#EF4040",messageColor:"#fff"}):d.success({title:"",message:"Subscription successful!",position:"topRight",timeout:3e3,backgroundColor:"#64B880",messageColor:"#fff"})}catch(t){t.response&&t.response.status===409?d.warning({title:"Warning",message:"This email is already subscribed.",position:"topRight",timeout:3e3,messageColor:"#fff"}):d.error({title:"Error",message:"Subscription failed. Please try again later.",position:"topRight",timeout:3e3,backgroundColor:"#EF4040",messageColor:"#fff"})}h.reset(),localStorage.removeItem(N)});const f=document.querySelector(".router");document.querySelector("body");let P=0;window.addEventListener("scroll",()=>{const e=document.documentElement.scrollTop;document.body.hasAttribute("data-user-scrolling")&&(f.classList.add("sticky"),e>0?e>P?f.classList.add("hidden"):f.classList.remove("hidden"):f.classList.remove("sticky"),P=e)});document.addEventListener("wheel",()=>{document.body.setAttribute("data-user-scrolling","true"),setTimeout(()=>{document.body.removeAttribute("data-user-scrolling")},100)});
//# sourceMappingURL=index-C8rzHfTH.js.map
