const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/_task-manager-Di9FvUSR.css"])))=>i.map(i=>d[i]);
var K=Object.defineProperty;var V=(t,e,a)=>e in t?K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var A=(t,e,a)=>V(t,typeof e!="symbol"?e+"":e,a);import{e as Z,c as G,a as Y,M as Q,g as F,f as X,s as ee,b as te,_ as $}from"./favorites-B6o4zNnW.js";/* empty css               */import{a as N}from"./vendor-CNNbG8jS.js";function _(t){return t.sort((e,a)=>e.name.localeCompare(a.name)).map(({filter:e,name:a,imgURL:r})=>`<li class='categories-item' data-name='${a}' data-filter='${e}' tabindex="0"
             style="background-image:url('${r}');background-size:cover; background-repeat:no-repeat; background-position:center">
             <h3 class="categories-item-title">${a}</h3>
             <p class="categories-item-text">${e}</p>
          </li>`).join("")}let B=document.querySelector(".workouts-container-list");const c=document.querySelector(".m-workouts .workouts-pagination");let m={bodypart:"",muscles:"",equipment:"",keyword:""};async function d(t="",e="",a="",r="",o=1,n=10){m={bodypart:t,muscles:e,equipment:a,keyword:r};try{const s=Z(t,e,a,r,o,n);console.log(`Request URL: ${s}`);const y=await fetch(s);if(!y.ok)throw new Error("Failed to fetch workouts");const l=await y.json();console.log("Received data:",l),B&&(B.innerHTML=G(l.results));const C=document.querySelector(".workouts-container"),T=document.querySelector(".workouts-container-list"),x=document.querySelector(".workouts-error");C&&(C.style.display="flex",T.style.display="flex",x.style.display="none"),l.results.length===0?(T.style.display="none",x.style.display="block",c.style.display="none"):l.results.length>0&&l.totalPages&&l.totalPages>0&&(c.style.display="flex",ae(l.totalPages,o)),document.querySelectorAll(".workout-start-btn").forEach(R=>{R.addEventListener("click",async U=>{U.preventDefault();const j=R.closest(".workouts-card").dataset.id;try{const f=await fetch(`${Y()}/${j}`);if(!f.ok)throw new Error("Failed to fetch exercise details");const J=await f.json();window.modalWindow||(window.modalWindow=new Q),window.modalWindow.open(J)}catch(f){console.error("Error opening modal:",f)}})})}catch(s){console.error("Error loading workouts:",s)}}function ae(t,e){if(console.log("Setting up pagination:",{totalPages:t,currentPage:e}),!c){console.error("Pagination container not found");return}if(c.innerHTML="",c.style.display="flex",c.setAttribute("data-total",t),c.setAttribute("data-current",e-1),t>1){const a=F(t,e-1);c.appendChild(a),c.querySelectorAll(".pagination-page").forEach(r=>{r.addEventListener("click",o=>{o.preventDefault();const n=parseInt(r.getAttribute("data-index"))+1;console.log("Pagination clicked, page:",n),d(m.bodypart,m.muscles,m.equipment,m.keyword,n,10)})})}}async function O(t="Muscles",e=1,a=12){a=window.innerWidth<=768?9:a;const{data:o}=await N.get(X(),{params:{filter:t,page:e,limit:a}});return o}const re=document.querySelector(".filters-title"),oe=document.querySelector(".categories-list"),D=document.querySelectorAll(".filter-button"),h=document.querySelector("#search-form"),I=document.querySelector("#search-input");let H="Muscles";D.forEach(t=>{t.addEventListener("click",async e=>{let a=e.target.getAttribute("data-filter").replace("-"," ");H=a,await q(a),D.forEach(n=>n.classList.remove("active")),e.target.classList.add("active"),L(),E(!1);const r=document.querySelector(".m-workouts");r.style.display="none";const o=document.querySelector(".m-categories");o.style.display="flex"})});h==null||h.addEventListener("submit",async t=>{t.preventDefault();const e=encodeURIComponent(I.value.trim());switch(W){case"Muscles":d("",w,"",e,1,10);break;case"Body parts":d(w,"","",e,1,10);break;case"Equipment":d("","",w,e,1,10);break}I.value=""});function E(t){h.style.display=t?"block":"none"}function se(t){const e=t.currentTarget.dataset.name;L(e),oe.style.display="none",E(!0),ie()}function L(t=!1){re.innerHTML=t?'Exercises / <span class="selected-category">'+t+"</span>":"Exercises"}function ne(){document.querySelectorAll(".categories-item").forEach(e=>{e.addEventListener("click",se)})}document.addEventListener("DOMContentLoaded",async()=>{await q(H),ne(),E(!1)});async function ie(t,e=""){}let k=document.querySelector(".categories-list");document.querySelector(".workouts-container");const i=document.querySelector(".m-categories .categories-pagination");let w="",W="Muscles";async function q(t){const e=document.querySelector(".m-categories");e&&(e.style.display="flex");try{const a=await O(t);if(console.log("Categories data:",a),i&&(i.innerHTML="",a.totalPages>1)){i.style.display="flex",i.setAttribute("data-total",a.totalPages),i.setAttribute("data-current",0);const r=F(a.totalPages,0);i.appendChild(r),i.querySelectorAll(".pagination-page").forEach(o=>{o.addEventListener("click",ce)})}k&&(k.innerHTML=_(a.results),z())}catch(a){console.error("Error loading categories:",a)}}async function ce(t){t.preventDefault();const e=Number(t.target.dataset.index),a=e+1,r=document.querySelector(".filter-button.active"),o=r?r.dataset.filter.replace("-"," "):"";try{const n=await O(o,a);k&&(k.innerHTML=_(n.results),z()),i&&(i.setAttribute("data-current",e),i.querySelectorAll(".pagination-page").forEach(s=>{s.classList.remove("selected")}),t.target.classList.add("selected"))}catch(n){console.error("Error handling pagination:",n)}}function z(){document.querySelectorAll(".categories-item").forEach(e=>{e.addEventListener("click",le)})}function le(t){t.preventDefault();const e=document.querySelector(".m-categories"),a=document.querySelector(".m-workouts");if(e&&a){e.style.display="none",a.style.display="flex";const r=t.target.closest(".categories-item");if(!r)return;E(!0);const o=encodeURIComponent(r.dataset.name);w=o,L(r.dataset.name);const n=r.dataset.filter;W=n,console.log(o);let s=window.innerWidth<=768?8:10;switch(n){case"Muscles":d("",o,"","",1,s);break;case"Body parts":d(o,"","","",1,s);break;case"Equipment":d("","",o,"",1,s);break}}}document.addEventListener("DOMContentLoaded",()=>{q("Muscles")});const v=document.querySelector(".subscribe-form"),b=v.elements.email;let g={email:""};const M="subscribe-form-state",de=()=>{localStorage.setItem(M,JSON.stringify(g))},ue=()=>{const t=localStorage.getItem(M);t&&(g=JSON.parse(t),b.value=g.email||"")};ue();v.addEventListener("input",t=>{const{name:e,value:a}=t.target;g[e]=a.trim(),de()});v.addEventListener("submit",async t=>{if(t.preventDefault(),!b.validity.valid){alert("Please enter a valid email");return}g.email=b.value.trim();try{const e=await N.post(ee(),g);e.data.error?e.status===409?alert("This email is already subscribed."):alert("Subscription failed. Please try again later."):alert("Subscription successful!")}catch(e){e.response&&e.response.status===409?alert("This email is already subscribed."):alert("Subscription failed. Please try again later.")}v.reset(),localStorage.removeItem(M)});const p=document.querySelector(".router");document.querySelector("body");let P=0;window.addEventListener("scroll",()=>{const t=document.documentElement.scrollTop;document.body.hasAttribute("data-user-scrolling")&&(p.classList.add("sticky"),t>0?t>P?p.classList.add("hidden"):p.classList.remove("hidden"):p.classList.remove("sticky"),P=t)});document.addEventListener("wheel",()=>{document.body.setAttribute("data-user-scrolling","true"),setTimeout(()=>{document.body.removeAttribute("data-user-scrolling")},100)});const u=class u{constructor(){if(u.instance)return u.instance;this.ratingBackdrop=document.querySelector("[data-rating-modal]"),this.ratingCloseBtn=document.querySelector("[data-rating-close]"),this.ratingForm=document.querySelector(".rating-form"),this.backdrop=document.querySelector("[data-modal]"),this.ratingCounter=document.querySelector(".rating-form-value"),this.currentExerciseId=null,this.bindEvents(),u.instance=this}bindEvents(){this.ratingCloseBtn&&this.ratingCloseBtn.addEventListener("click",()=>this.closeRatingModal()),this.ratingBackdrop&&this.ratingBackdrop.addEventListener("click",a=>{a.target===this.ratingBackdrop&&this.closeRatingModal()}),document.querySelectorAll(".rating-form-radio").forEach(a=>{a.addEventListener("mouseover",()=>{this.updateRatingDisplay(a.value)}),a.addEventListener("mouseout",()=>{const r=document.querySelector(".rating-form-radio:checked");this.updateRatingDisplay(r?r.value:"0.0")}),a.addEventListener("change",()=>{this.updateRatingDisplay(a.value)})}),this.ratingForm&&this.ratingForm.addEventListener("submit",a=>this.handleRatingSubmit(a))}updateRatingDisplay(e){this.ratingCounter&&(this.ratingCounter.textContent=parseFloat(e).toFixed(1))}openRatingModal(e){this.ratingBackdrop&&this.backdrop&&(this.currentExerciseId=e,this.backdrop.classList.add("is-hidden"),this.ratingBackdrop.classList.remove("is-hidden"),this.updateRatingDisplay("0.0"),document.querySelectorAll(".rating-form-radio").forEach(r=>r.checked=!1))}closeRatingModal(){this.ratingBackdrop&&this.backdrop&&(this.ratingBackdrop.classList.add("is-hidden"),this.backdrop.classList.remove("is-hidden"),this.ratingForm&&(this.ratingForm.reset(),this.updateRatingDisplay("0.0")))}async handleRatingSubmit(e){e.preventDefault();const a=this.ratingForm.querySelector("#rating-email").value.trim(),r=this.ratingForm.querySelector("#rating-comment").value.trim(),o=document.querySelector(".rating-form-radio:checked");if(!a||!r||!o){this.showNotification("Please fill in all fields","error");return}if(!/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(a)){this.showNotification("Please enter a valid email","error");return}try{const s=await te(this.currentExerciseId,{rate:parseFloat(o.value),email:a,review:r});if(s.ok)this.closeRatingModal(),this.showNotification("Rating added successfully","success");else{const y=await s.json();throw new Error(y.message||"Failed to add rating")}}catch(s){this.showNotification(s.message,"error")}}showNotification(e,a){console.log(`${a}: ${e}`)}};A(u,"instance",null);let S=u;document.addEventListener("DOMContentLoaded",()=>{window.modalWindowRating=new S});window.location.pathname.includes("task-management")&&$(()=>Promise.resolve({}),__vite__mapDeps([0]));async function ge(){if(!window.taskManager)try{const e=(await $(()=>import("./_task-manager-M1fNHe4L.js"),[])).default;window.taskManager=new e,await new Promise(a=>setTimeout(a,200))}catch(t){return console.error("Error initializing TaskManager:",t),null}return window.taskManager}document.addEventListener("DOMContentLoaded",async()=>{try{if(window.location.pathname.includes("task-management")){await ge();const t=document.getElementById("addTaskBtn");t&&t.addEventListener("click",async e=>{e.preventDefault(),window.taskManager?window.taskManager.showModal():console.error("TaskManager not initialized")})}}catch(t){console.error("Error initializing task manager:",t)}});
//# sourceMappingURL=index-DCW11g_v.js.map
