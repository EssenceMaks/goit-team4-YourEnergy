<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Management System</title>
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="./css/task-manager.css">
    <link rel="stylesheet" href="./css/dev-drive.css">
    

</head>
<body>
    <load src="./partials/header.html" icon-path="./img/sprite.svg#logo" />

    <div class="container">
        <load src="./partials/dev_drive.html" />
        <div class="task-grid">
            <!-- Заголовки -->
            <div class="header-cell"></div>
            <div class="header-cell">Who Take</div>
            <div class="header-cell">In Progress</div>
            <div class="header-cell">To Verify</div>
            <div class="header-cell">Done</div>

            <!-- Top-priority строка -->
            <div class="priority-cell">Top-priority</div>
            <div class="drop-zone" data-priority="top-priority" data-status="who-take"></div>
            <div class="drop-zone" data-priority="top-priority" data-status="in-progress"></div>
            <div class="drop-zone" data-priority="top-priority" data-status="to-verify"></div>
            <div class="drop-zone" data-priority="top-priority" data-status="done"></div>

            <!-- Important строка -->
            <div class="priority-cell">Important</div>
            <div class="drop-zone" data-priority="important" data-status="who-take"></div>
            <div class="drop-zone" data-priority="important" data-status="in-progress"></div>
            <div class="drop-zone" data-priority="important" data-status="to-verify"></div>
            <div class="drop-zone" data-priority="important" data-status="done"></div>

            <!-- To Fix строка -->
            <div class="priority-cell">To Fix</div>
            <div class="drop-zone" data-priority="to-fix" data-status="who-take"></div>
            <div class="drop-zone" data-priority="to-fix" data-status="in-progress"></div>
            <div class="drop-zone" data-priority="to-fix" data-status="to-verify"></div>
            <div class="drop-zone" data-priority="to-fix" data-status="done"></div>

            <!-- Normal строка -->
            <div class="priority-cell">Normal</div>
            <div class="drop-zone" data-priority="normal" data-status="who-take"></div>
            <div class="drop-zone" data-priority="normal" data-status="in-progress"></div>
            <div class="drop-zone" data-priority="normal" data-status="to-verify"></div>
            <div class="drop-zone" data-priority="normal" data-status="done"></div>
        </div>

        <!-- После основной таблицы добавляем новые блоки -->
        <div class="task-categories">
            <!-- Must Have блок -->
            <div class="category-block">
                <div class="category-header">
                    <div class="header-left">Must Have</div>
                    <div class="header-right">Sort Type</div>
                </div>
                <div class="category-grid must-have-grid">
                    <!-- Здесь будут отображаться задачи Must Have -->
                </div>
            </div>

            <!-- Upgrade блок -->
            <div class="category-block">
                <div class="category-header">
                    <div class="header-left">Upgrade</div>
                    <div class="header-right">Sort Type</div>
                </div>
                <div class="category-grid upgrade-grid">
                    <!-- Здесь будут отображаться задачи Upgrade -->
                </div>
            </div>
        </div>

        <!-- Добавляем кнопку переключения темы рядом с кнопкой добавления -->
        <div class="floating-buttons">
            <button id="addTaskBtn" class="add-task-btn">+</button>
            <button id="themeToggleBtn" class="theme-toggle-btn">
                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
            </button>
        </div>
    </div>

    <!-- Модальные окна -->
    <load src="./partials/task-modal.html" />
    
    <script src="./js/task-manager.js"></script>
    <!-- Модальное окно подтверждения удаления -->
    <div id="deleteConfirmModal" class="modal">
        <div class="modal-content delete-confirm">
            <h2>Подтверждение удаления</h2>
            <p>Вы уверены, что хотите удалить эту задачу?</p>
            <div class="confirm-buttons">
                <button id="confirmDelete" class="danger-btn">Удалить</button>
                <button id="cancelDelete" class="cancel-btn">Отмена</button>
            </div>
        </div>
    </div>

    <load src="./partials/footer.html" />

    <!-- Скрипты в конце body
    <script src="./js/dev-drive.js"></script> -->

    <!-- Добавьте перед закрывающим тегом </body> -->
    <div class="test-connection-container" style="position: fixed; bottom: 20px; right: 20px; background: #333; padding: 15px; border-radius: 8px; color: white;">
        <button id="testConnectionBtn" style="padding: 10px 20px; margin-bottom: 10px;">Test Connection</button>
        <div id="testConnectionStatus" style="max-width: 300px; word-wrap: break-word;"></div>
    </div>

    <!-- Добавьте скрипт перед закрывающим тегом </body> -->
    <script src="./js/test-task-manager.js"></script>
</body>
</html> 